<!DOCTYPE html>
<html lang="no">

<head>
    <meta charset="UTF-8">
    <title>DPIA Sjekkliste</title>
    <link rel="stylesheet" href="style.css">
    <!-- External libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/docx@8.5.0/build/index.umd.js"></script>
    <script src="script.js" defer></script>
</head>

<body>

    <h1>DPIA Sjekkliste</h1>

    <form id="dpiaForm">
        <label for="formål">1. Hva er formålet med behandlingen?</label>
        <textarea name="formål" id="purpose"></textarea>

        <label for="nødvendig">2. Er behandlingen nødvendig for formålet?</label>
        <textarea name="nødvendig" id="necessity"></textarea>

        <label for="legalBasis">3. Hva er det rettslige grunnlaget for behandlingen?</label>
        <textarea name="legalBasis" id="legalBasis"></textarea>

        <label for="dataTypes">4. Hvilke typer personopplysninger behandles?</label>
        <textarea name="dataTypes" id="dataTypes"></textarea>

        <label for="sensitive">5. Behandles det særlige kategorier av personopplysninger?</label>
        <textarea name="sensitive" id="sensitive"></textarea>

        <label for="volume">6. Hvor mange personer gjelder behandlingen?</label>
        <textarea name="volume" id="volume"></textarea>

        <label for="dataFlow">7. Hvordan samles og lagres data? Hvordan deles de?</label>
        <textarea name="dataFlow" id="dataFlow"></textarea>

        <label for="access">8. Hvem har tilgang til opplysningene?</label>
        <textarea name="access" id="access"></textarea>

        <label for="transfers">9. Overføres opplysningene til utlandet?</label>
        <textarea name="transfers" id="transfers"></textarea>

        <label for="retention">10. Hvor lenge lagres opplysningene?</label>
        <textarea name="retention" id="retention"></textarea>

        <label for="measures">11. Hvilke sikkerhetstiltak er på plass?</label>
        <textarea name="measures" id="measures"></textarea>

        <label for="risks">12. Hva er risikoene for de registrerte?</label>
        <textarea name="risks" id="risks"></textarea>
    </form>

    <!-- Export buttons outside the form -->
    <div class="export-buttons">
        <button type="button" onclick="generateDoc()">Eksporter til DOC</button>
        <button type="button" onclick="generatePDF()">Eksporter til PDF</button>
    </div>
    <div id="legalTab" class="legal-tab" onclick="toggleLegalPanel()">§</div>

    <div id="legalPanel" class="legal-panel">
        <div class="resize-handle" onmousedown="startResize(event)"></div>

        <div class="panel-header">
            <h2>Rettslig grunnlag</h2>
            <button class="close-button" onclick="toggleLegalPanel()">✕</button>
        </div>
        <div class="panel-content">
            <h3>GDPR Artikkel 6</h3>
            <p><strong>1a)</strong> Samtykke fra den registrerte...</p>
            <p><strong>1b)</strong> Nødvendig for å oppfylle en kontrakt...</p>

            <h3>Personopplysningsloven § 1</h3>
            <p>Formålet med loven er å beskytte...</p>
            <!-- Links -->
            <h3>Eksterne ressurser</h3>
            <button
                onclick="window.open('https://www.datatilsynet.no/regelverk-og-skjema/sikkerhetsvurdering-av-behandling-av-personopplysninger-dpia/', '_blank')">
                Datatilsynets DPIA-sjekkliste
            </button>

            <button onclick="window.open('https://lovdata.no/dokument/SF/forskrift/2018-07-20-1053/§35', '_blank')">
                Lovdata § 35
            </button>
        </div>

        <!-- Add more references as needed -->
    </div>
    </div>

    <!-- Hamburger icon -->
    <div id="hamburger" onclick="toggleSidebar()">☰</div>

    <!-- Sidebar -->
    <nav id="sidebar" class="sidebar">
        <ul>
            <li><a href="#dpia">DPIA Sjekkliste</a></li>
            <li><a href="#tia">TIA - Transfer Impact Assessment</a></li>
            <li><a href="#behandlingsprotokoll">Behandlingsprotokoll</a></li>
            <li><a href="#ros">Risikovurdering (ROS)</a></li>
            <li><a href="#cybersecurity">Cyber Security Advice</a></li>
            <li><a href="#privacy-statement">Privacy Statement Builder</a></li>
            <li>
                <hr>
            </li>
            <li><a href="https://dataprivacyframework.gov" target="_blank" rel="noopener">Data Privacy Framework
                    (DPF)</a></li>
            <li><a href="https://edpb.europa.eu" target="_blank" rel="noopener">EDPB - Legal Advice</a></li>
        </ul>
    </nav>
</body>

</html>